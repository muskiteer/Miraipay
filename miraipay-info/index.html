<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MiraiPay - AI-Powered Tool Marketplace with MNEE Payments</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
            margin-bottom: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 0;
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
            border-radius: 10px;
            color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .header p {
            font-size: 1.3rem;
            opacity: 0.9;
            font-weight: 300;
        }
        
        .section {
            margin: 40px 0;
            padding: 30px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border-left: 5px solid #8b5cf6;
        }
        
        .section h2 {
            color: #2c3e50;
            font-size: 2.2rem;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .section h3 {
            color: #34495e;
            font-size: 1.5rem;
            margin: 25px 0 15px 0;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .feature-card {
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #dee2e6;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .feature-card h4 {
            color: #2c3e50;
            font-size: 1.3rem;
            margin-bottom: 15px;
        }
        
        .security-badge {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .security-badge::before {
            content: "üîí";
            font-size: 2rem;
        }
        
        .tech-stack {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .tech-item {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .tech-item:hover {
            transform: scale(1.05);
        }
        
        .tech-item h4 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .diagram-container {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
            border: 1px solid #e9ecef;
            overflow-x: auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .diagram-container .mermaid {
            min-width: 100%;
            display: flex;
            justify-content: center;
        }
        
        .diagram-container .mermaid svg {
            max-width: 100%;
            height: auto;
        }
        
        .highlight {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 25px 0;
            text-align: center;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .metric-card {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .metric-card h3 {
            font-size: 2rem;
            margin-bottom: 10px;
            color: white;
        }
        
        .footer {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            margin-top: 40px;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            .header h1 {
                font-size: 2rem;
            }
            .section {
                padding: 20px;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>MiraiPay</h1>
            <p>AI-Powered Tool Marketplace with MNEE Token Payments</p>
            <p style="font-size: 1rem; margin-top: 10px;">X402 Payment Protocol | Decentralized Tool Monetization</p>
        </div>

        <!-- Executive Summary -->
        <div class="section">
            <h2>Executive Summary</h2>
            <p>MiraiPay is a revolutionary decentralized platform where developers can create, monetize, and discover AI-powered tools using the X402 payment protocol. Built on blockchain technology with MNEE stablecoin payments, MiraiPay enables automatic micropayments between AI agents and tool creators, fostering an ecosystem of innovation and fair compensation.</p>

            <div class="highlight">
                <h3>Key Value Proposition</h3>
                <p>Empowering developers to monetize their APIs through AI-driven tool discovery and automatic blockchain-based payments</p>
            </div>

            <div class="metrics-grid">
                <div class="metric-card">
                    <h3>‚ö°</h3>
                    <p>Instant Payments</p>
                </div>
                <div class="metric-card">
                    <h3>üîí</h3>
                    <p>Bank-Grade Security</p>
                </div>
                <div class="metric-card">
                    <h3>ü§ñ</h3>
                    <p>AI-Powered Agent</p>
                </div>
                <div class="metric-card">
                    <h3>‚úÖ</h3>
                    <p>Admin Approved Tools</p>
                </div>
            </div>
        </div>

        <!-- Security Features -->
        <div class="section">
            <h2>üîê Security Features</h2>
            
            <div class="security-badge">
                <div>
                    <h3>Wallet Encryption with User Password</h3>
                    <p>Every user's private key is encrypted using Fernet symmetric encryption (AES-128) derived from a master encryption key. Wallets are automatically generated on registration and securely stored.</p>
                </div>
            </div>

            <div class="security-badge">
                <div>
                    <h3>Immutable Tool Metadata Protection</h3>
                    <p>Once a tool is approved by admin, any changes to its API specifications (URL, method, headers, body) are detected via SHA-256 hash verification. Modified tools require re-approval to prevent malicious modifications.</p>
                </div>
            </div>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üîë JWT Authentication</h4>
                    <p>Secure token-based authentication with 7-day expiry. All API endpoints protected with Bearer token authentication.</p>
                </div>
                <div class="feature-card">
                    <h4>üõ°Ô∏è bcrypt Password Hashing</h4>
                    <p>Industry-standard password hashing with salt to protect user credentials. Passwords never stored in plaintext.</p>
                </div>
                <div class="feature-card">
                    <h4>üîê Role-Based Access Control</h4>
                    <p>Admin-only endpoints for tool approval and user management. Multi-tier permission system.</p>
                </div>
                <div class="feature-card">
                    <h4>üìä Transaction Audit Trail</h4>
                    <p>Complete blockchain transaction history with immutable records of all MNEE payments.</p>
                </div>
                <div class="feature-card">
                    <h4>‚úÖ Admin Tool Approval System</h4>
                    <p>All tools must be reviewed and approved by administrators before becoming available in the marketplace.</p>
                </div>
                <div class="feature-card">
                    <h4>üîç API Metadata Hash Verification</h4>
                    <p>SHA-256 hash of tool specifications prevents unauthorized modifications without re-approval.</p>
                </div>
            </div>
        </div>

        <!-- System Architecture -->
        <div class="section">
            <h2>System Architecture</h2>
            <div class="diagram-container">
                <div class="mermaid">
                    flowchart TB
                        subgraph "Frontend Layer - Next.js"
                            UI[User Interface]
                            AUTH_UI[Authentication Pages]
                            DASH[Dashboard]
                            TOOLS_UI[Tool Marketplace]
                            AGENT_UI[AI Agent Chat]
                            WALLET_UI[Wallet View]
                            ADMIN_UI[Admin Panel]
                        end
                        
                        subgraph "API Gateway - FastAPI"
                            GATEWAY[API Gateway/CORS]
                            AUTH_MW[JWT Middleware]
                            RATE_LIMIT[Rate Limiting]
                        end
                        
                        subgraph "Backend Services - Python FastAPI"
                            AUTH_SVC[Authentication Service]
                            TOOL_SVC[Tool Management Service]
                            PAYMENT_SVC[Payment Service]
                            ADMIN_SVC[Admin Service]
                            MCP_SVC[MCP Server]
                            AGENT_SVC[AI Agent Service]
                            SETTINGS_SVC[Settings Service]
                        end
                        
                        subgraph "AI Integration"
                            GROQ[Groq LLM Service]
                            GEMINI[Google Gemini API]
                            TOOL_SELECT[Tool Selection Logic]
                        end
                        
                        subgraph "Blockchain Layer"
                            WEB3[Web3.py]
                            ETH_NODE[Ethereum RPC Node]
                            MNEE_CONTRACT[MNEE ERC-20 Contract]
                            WALLET_GEN[Wallet Generator]
                        end
                        
                        subgraph "Data Layer"
                            POSTGRES[(PostgreSQL Database)]
                            CRYPTO[Cryptography Service]
                        end
                        
                        subgraph "Security Layer"
                            FERNET[Fernet Encryption]
                            BCRYPT[bcrypt Password Hash]
                            JWT[JWT Token Management]
                            HASH_VERIFY[SHA-256 Hash Verification]
                        end
                        
                        UI --> GATEWAY
                        AUTH_UI --> GATEWAY
                        DASH --> GATEWAY
                        TOOLS_UI --> GATEWAY
                        AGENT_UI --> GATEWAY
                        WALLET_UI --> GATEWAY
                        ADMIN_UI --> GATEWAY
                        
                        GATEWAY --> AUTH_MW
                        AUTH_MW --> AUTH_SVC
                        AUTH_MW --> TOOL_SVC
                        AUTH_MW --> PAYMENT_SVC
                        AUTH_MW --> ADMIN_SVC
                        AUTH_MW --> MCP_SVC
                        AUTH_MW --> AGENT_SVC
                        AUTH_MW --> SETTINGS_SVC
                        
                        AUTH_SVC --> WALLET_GEN
                        AUTH_SVC --> POSTGRES
                        AUTH_SVC --> BCRYPT
                        AUTH_SVC --> JWT
                        
                        TOOL_SVC --> POSTGRES
                        TOOL_SVC --> HASH_VERIFY
                        
                        PAYMENT_SVC --> WEB3
                        PAYMENT_SVC --> POSTGRES
                        
                        ADMIN_SVC --> POSTGRES
                        ADMIN_SVC --> HASH_VERIFY
                        
                        AGENT_SVC --> GROQ
                        AGENT_SVC --> GEMINI
                        AGENT_SVC --> TOOL_SELECT
                        AGENT_SVC --> PAYMENT_SVC
                        
                        WEB3 --> ETH_NODE
                        ETH_NODE --> MNEE_CONTRACT
                        
                        WALLET_GEN --> FERNET
                        CRYPTO --> FERNET
                        
                        MCP_SVC --> TOOL_SVC
                        MCP_SVC --> PAYMENT_SVC
                </div>
            </div>
        </div>

        <!-- User Flow Diagram -->
        <div class="section">
            <h2>User Journey - Complete Flow</h2>
            <div class="diagram-container">
                <div class="mermaid">
                    flowchart TD
                        START[User Starts Journey] --> REG1[Visit Platform]
                        REG1 --> REG2[Register Account]
                        REG2 --> REG3[Wallet Auto-Generated]
                        REG3 --> REG4[Private Key Encrypted]
                        
                        REG4 --> DISC1[Browse Marketplace]
                        DISC1 --> DISC2[View Tool Details]
                        DISC2 --> DISC3[Check Pricing]
                        
                        DISC3 --> AGENT1[Chat with AI Agent]
                        AGENT1 --> AGENT2[Agent Selects Tool]
                        AGENT2 --> AGENT3[Payment Authorized]
                        AGENT3 --> AGENT4[Tool Executed]
                        
                        AGENT4 --> CREATE{Want to Create Tool?}
                        CREATE -->|Yes| CREATE1[Create New Tool]
                        CREATE1 --> CREATE2[Submit for Approval]
                        CREATE2 --> CREATE3[Admin Reviews Tool]
                        CREATE3 --> CREATE4[Tool Approved]
                        
                        CREATE4 --> EARN1[Receive Payments]
                        EARN1 --> EARN2[Track Earnings]
                        EARN2 --> EARN3[View Transaction History]
                        
                        CREATE -->|No| AGENT1
                        EARN3 --> END[Continue Using Platform]
                        
                        style REG1 fill:#8b5cf6,color:#fff
                        style REG2 fill:#8b5cf6,color:#fff
                        style REG3 fill:#8b5cf6,color:#fff
                        style REG4 fill:#8b5cf6,color:#fff
                        style DISC1 fill:#10b981,color:#fff
                        style DISC2 fill:#10b981,color:#fff
                        style DISC3 fill:#10b981,color:#fff
                        style AGENT1 fill:#3b82f6,color:#fff
                        style AGENT2 fill:#3b82f6,color:#fff
                        style AGENT3 fill:#3b82f6,color:#fff
                        style AGENT4 fill:#3b82f6,color:#fff
                        style CREATE1 fill:#f59e0b,color:#fff
                        style CREATE2 fill:#f59e0b,color:#fff
                        style CREATE3 fill:#f59e0b,color:#fff
                        style CREATE4 fill:#f59e0b,color:#fff
                        style EARN1 fill:#ec4899,color:#fff
                        style EARN2 fill:#ec4899,color:#fff
                        style EARN3 fill:#ec4899,color:#fff
                </div>
            </div>
        </div>

        <!-- Backend Workflow -->
        <div class="section">
            <h2>Backend Workflow Architecture</h2>
            <div class="diagram-container">
                <div class="mermaid">
                    sequenceDiagram
                        participant User
                        participant Frontend
                        participant API
                        participant Auth
                        participant ToolService
                        participant PaymentService
                        participant Blockchain
                        participant Database
                        
                        User->>Frontend: Register Account
                        Frontend->>API: POST /api/auth/register
                        API->>Auth: Create User
                        Auth->>Blockchain: Generate Ethereum Wallet
                        Blockchain-->>Auth: Public Key + Private Key
                        Auth->>Auth: Encrypt Private Key (Fernet)
                        Auth->>Database: Store User + Encrypted Key
                        Auth-->>Frontend: JWT Token + Public Key
                        Frontend-->>User: Registration Success
                        
                        User->>Frontend: Browse Tools
                        Frontend->>API: GET /api/tools
                        API->>ToolService: Get Approved Tools
                        ToolService->>Database: Query Tools (approved=true)
                        Database-->>ToolService: Tool List
                        ToolService-->>Frontend: Return Tools
                        
                        User->>Frontend: Chat with AI Agent
                        Frontend->>API: POST /api/agent/chat
                        API->>Auth: Verify JWT
                        API->>ToolService: Get Available Tools
                        API->>AI: Select Best Tool for Query
                        AI-->>API: Tool Selection
                        API->>PaymentService: Execute Payment
                        PaymentService->>Database: Get User's Encrypted Key
                        PaymentService->>PaymentService: Decrypt Private Key
                        PaymentService->>Blockchain: Send MNEE Transaction
                        Blockchain-->>PaymentService: Transaction Hash
                        PaymentService->>Database: Record Transaction
                        API->>ToolService: Execute Tool API
                        ToolService-->>API: Tool Result
                        API-->>Frontend: Final Response
                        Frontend-->>User: Display Result
                </div>
            </div>
        </div>

        <!-- Tool Approval Process -->
        <div class="section">
            <h2>üîê Tool Approval & Security Process</h2>
            <div class="diagram-container">
                <div class="mermaid">
                    flowchart TD
                        START[Developer Creates Tool] --> SUBMIT[Submit Tool for Approval]
                        SUBMIT --> HASH[Calculate SHA-256 Metadata Hash]
                        HASH --> STORE[Store Tool with approved=false]
                        STORE --> QUEUE[Add to Pending Queue]
                        
                        QUEUE --> ADMIN_REVIEW{Admin Reviews Tool}
                        ADMIN_REVIEW -->|Approve| VERIFY[Verify Metadata Hash]
                        VERIFY -->|Hash Valid| APPROVE[Set approved=true]
                        APPROVE --> MARKETPLACE[Tool Available in Marketplace]
                        
                        ADMIN_REVIEW -->|Reject| REJECT[Delete Tool]
                        REJECT --> END[Tool Rejected]
                        
                        VERIFY -->|Hash Invalid| TAMPER[Tool Tampered]
                        TAMPER --> REJECT
                        
                        MARKETPLACE --> USER_USE[User Attempts to Use Tool]
                        USER_USE --> CHECK{Tool Modified?}
                        CHECK -->|No Changes| ALLOW[Execute Tool]
                        CHECK -->|Changes Detected| BLOCK[Block Execution]
                        BLOCK --> RE_APPROVE[Requires Admin Re-Approval]
                        RE_APPROVE --> ADMIN_REVIEW
                        
                        style APPROVE fill:#10b981,color:#fff
                        style REJECT fill:#ef4444,color:#fff
                        style BLOCK fill:#f59e0b,color:#fff
                        style MARKETPLACE fill:#8b5cf6,color:#fff
                </div>
            </div>

            <div class="security-badge">
                <div>
                    <h3>How Metadata Hash Protection Works</h3>
                    <p><strong>1. Creation:</strong> When a tool is created, a SHA-256 hash is calculated from: API URL + Method + Headers + Body Template</p>
                    <p><strong>2. Approval:</strong> Admin verifies the hash hasn't changed before approving</p>
                    <p><strong>3. Execution:</strong> Before each use, the system recalculates the hash and compares it to the stored hash</p>
                    <p><strong>4. Protection:</strong> If hash doesn't match, the tool is blocked and requires re-approval</p>
                </div>
            </div>
        </div>

        <!-- Payment Flow -->
        <div class="section">
            <h2>Payment Processing Flow</h2>
            <div class="diagram-container">
                <div class="mermaid">
                    sequenceDiagram
                        participant User
                        participant Agent
                        participant PaymentService
                        participant CryptoService
                        participant Web3
                        participant MNEE
                        participant ToolOwner
                        participant Database
                        
                        User->>Agent: Request Tool Execution
                        Agent->>PaymentService: Initiate Payment
                        
                        Note over PaymentService: Security Check
                        PaymentService->>Database: Get User's Encrypted Private Key
                        Database-->>PaymentService: Encrypted Key
                        
                        PaymentService->>CryptoService: Decrypt Private Key
                        Note over CryptoService: Fernet Decryption
                        CryptoService-->>PaymentService: Plaintext Private Key
                        
                        PaymentService->>Web3: Check MNEE Balance
                        Web3->>MNEE: balanceOf(user_address)
                        MNEE-->>Web3: Balance
                        Web3-->>PaymentService: Balance Info
                        
                        alt Sufficient Balance
                            PaymentService->>Web3: Build Transaction
                            Web3->>Web3: Sign with Private Key
                            Web3->>MNEE: transfer(owner, amount)
                            MNEE-->>Web3: Transaction Hash
                            Web3-->>PaymentService: TX Hash
                            
                            PaymentService->>Database: Record Transaction
                            Database-->>PaymentService: Success
                            
                            PaymentService-->>Agent: Payment Confirmed
                            Agent->>Agent: Execute Tool
                            Agent-->>User: Tool Result + Receipt
                        else Insufficient Balance
                            PaymentService-->>Agent: Payment Failed
                            Agent-->>User: Error: Insufficient MNEE
                        end
                        
                        Note over ToolOwner: MNEE Received
                        ToolOwner->>Database: Check Earnings
                </div>
            </div>
        </div>

        <!-- Database Schema -->
        <div class="section">
            <h2>Database Schema</h2>
            <div class="diagram-container">
                <div class="mermaid">
                    erDiagram
                        USERS ||--o{ TOOLS : owns
                        USERS ||--o{ TRANSACTIONS : "sends"
                        USERS ||--o{ TRANSACTIONS : "receives"
                        USERS ||--o{ CONVERSATIONS : has
                        TOOLS ||--o{ TRANSACTIONS : "used_in"
                        
                        USERS {
                            int id PK
                            string email UK
                            string hashed_password
                            string public_key UK "Ethereum Address"
                            text encrypted_private_key "Fernet Encrypted"
                            string wallet_address
                            text groq_api_key "Encrypted"
                            boolean is_admin
                            datetime created_at
                        }
                        
                        TOOLS {
                            int id PK
                            string name
                            text description
                            string api_url
                            string api_method
                            text api_headers
                            text api_body_template
                            string metadata_hash "SHA-256 Hash"
                            float price_mnee
                            int owner_id FK
                            boolean approved "Admin Approved"
                            boolean active
                            datetime created_at
                            datetime updated_at
                        }
                        
                        TRANSACTIONS {
                            int id PK
                            int from_user_id FK
                            int to_user_id FK
                            int tool_id FK
                            float amount_mnee
                            string tx_hash UK "Ethereum TX Hash"
                            string status
                            datetime created_at
                        }
                        
                        CONVERSATIONS {
                            int id PK
                            int user_id FK
                            text user_message
                            string tool_selected
                            text tool_result
                            text final_response
                            datetime created_at
                        }
                </div>
            </div>
        </div>

        <!-- AI Agent Workflow -->
        <div class="section">
            <h2>AI Agent Workflow</h2>
            <div class="diagram-container">
                <div class="mermaid">
                    flowchart TD
                        START[User Sends Message] --> RECEIVE[Agent Receives Message]
                        RECEIVE --> GET_TOOLS[Fetch Available Tools]
                        GET_TOOLS --> FORMAT[Format Tools for LLM]
                        
                        FORMAT --> LLM{Google Gemini LLM}
                        LLM --> ANALYZE[Analyze User Intent]
                        ANALYZE --> SELECT{Select Best Tool}
                        
                        SELECT -->|Tool Found| EXTRACT[Extract Parameters]
                        SELECT -->|No Tool Needed| DIRECT[Direct Response]
                        
                        EXTRACT --> AUTO_INJECT[Auto-Inject Wallet Address]
                        AUTO_INJECT --> VALIDATE[Validate Parameters]
                        
                        VALIDATE --> PAYMENT[Process Payment]
                        PAYMENT --> CHECK_BAL{Balance OK?}
                        
                        CHECK_BAL -->|Yes| EXECUTE[Execute Tool API]
                        CHECK_BAL -->|No| ERROR1[Error: Insufficient Funds]
                        
                        EXECUTE --> API_CALL[HTTP Request to Tool]
                        API_CALL --> RESPONSE{API Response}
                        
                        RESPONSE -->|Success| RECORD[Record in Conversation]
                        RESPONSE -->|Error| ERROR2[Handle API Error]
                        
                        RECORD --> GENERATE[Generate Final Response with LLM]
                        ERROR2 --> GENERATE
                        DIRECT --> GENERATE
                        ERROR1 --> GENERATE
                        
                        GENERATE --> RETURN[Return to User]
                        RETURN --> END[End]
                        
                        style PAYMENT fill:#8b5cf6,color:#fff
                        style EXECUTE fill:#10b981,color:#fff
                        style ERROR1 fill:#ef4444,color:#fff
                        style ERROR2 fill:#f59e0b,color:#fff
                </div>
            </div>
        </div>

        <!-- Technology Stack -->
        <div class="section">
            <h2>Technology Stack</h2>
            <div class="tech-stack">
                <div class="tech-item">
                    <h4>Frontend</h4>
                    <p>Next.js 14</p>
                    <p>React 18</p>
                    <p>TypeScript</p>
                    <p>TailwindCSS</p>
                </div>
                <div class="tech-item">
                    <h4>Backend</h4>
                    <p>FastAPI</p>
                    <p>Python 3.12+</p>
                    <p>SQLAlchemy</p>
                    <p>Pydantic</p>
                </div>
                <div class="tech-item">
                    <h4>Database</h4>
                    <p>PostgreSQL</p>
                    <p>Alembic Migrations</p>
                </div>
                <div class="tech-item">
                    <h4>Blockchain</h4>
                    <p>Web3.py</p>
                    <p>Ethereum</p>
                    <p>MNEE ERC-20 Token</p>
                    <p>eth-account</p>
                </div>
                <div class="tech-item">
                    <h4>AI/ML</h4>
                    <p>Google Gemini</p>
                    <p>Groq API</p>
                    <p>LangChain (Optional)</p>
                </div>
                <div class="tech-item">
                    <h4>Security</h4>
                    <p>Fernet Encryption</p>
                    <p>bcrypt</p>
                    <p>JWT (PyJWT)</p>
                    <p>SHA-256 Hashing</p>
                </div>
            </div>
        </div>

        <!-- Key Features -->
        <div class="section">
            <h2>Key Features</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>ü§ñ Intelligent AI Agent</h4>
                    <p>Chat with an AI agent powered by Gemini that automatically selects and executes the right tool for your needs.</p>
                </div>
                <div class="feature-card">
                    <h4>üõ†Ô∏è Tool Marketplace</h4>
                    <p>Browse approved tools created by the community. Each tool is reviewed by admins before going live.</p>
                </div>
                <div class="feature-card">
                    <h4>üí∞ Automatic Payments</h4>
                    <p>Seamless MNEE token payments using the X402 protocol. Pay-per-use model with transparent pricing.</p>
                </div>
                <div class="feature-card">
                    <h4>üîß Tool Creation</h4>
                    <p>Create and monetize your own APIs. Simple registration process with admin approval system.</p>
                </div>
                <div class="feature-card">
                    <h4>üíº Earnings Dashboard</h4>
                    <p>Track your earnings from tool usage. View detailed transaction history and analytics.</p>
                </div>
                <div class="feature-card">
                    <h4>üë®‚Äçüíº Admin Panel</h4>
                    <p>Comprehensive admin dashboard for reviewing and approving tools, managing users, and monitoring the platform.</p>
                </div>
                <div class="feature-card">
                    <h4>üåê MCP Server Integration</h4>
                    <p>Model Context Protocol server for seamless AI agent integration with external AI systems.</p>
                </div>
                <div class="feature-card">
                    <h4>üìä Transaction History</h4>
                    <p>Complete audit trail of all payments with blockchain verification and status tracking.</p>
                </div>
            </div>
        </div>

        <!-- Security Deep Dive -->
        <div class="section">
            <h2>Security Architecture Deep Dive</h2>
            
            <h3>1. Wallet Security</h3>
            <div class="diagram-container">
                <div class="mermaid">
                    flowchart LR
                        REG[User Registration] --> GEN[Generate Ethereum Wallet]
                        GEN --> KEY[Private Key Generated]
                        KEY --> DERIVE[Derive Encryption Key from Master]
                        DERIVE --> ENC[Encrypt with Fernet AES-128]
                        ENC --> STORE[Store Encrypted Key in DB]
                        STORE --> SAFE[Private Key Never Exposed]
                        
                        USE[Need to Sign TX] --> FETCH[Fetch Encrypted Key]
                        FETCH --> DEC[Decrypt with Master Key]
                        DEC --> SIGN[Sign Transaction]
                        SIGN --> CLEAR[Clear from Memory]
                        
                        style SAFE fill:#10b981,color:#fff
                        style ENC fill:#8b5cf6,color:#fff
                        style DEC fill:#8b5cf6,color:#fff
                </div>
            </div>

            <h3>2. Authentication Flow</h3>
            <div class="diagram-container">
                <div class="mermaid">
                    sequenceDiagram
                        participant User
                        participant Frontend
                        participant API
                        participant Auth
                        participant bcrypt
                        participant JWT
                        participant DB
                        
                        User->>Frontend: Enter Email + Password
                        Frontend->>API: POST /api/auth/login
                        API->>Auth: Authenticate User
                        Auth->>DB: Find User by Email
                        DB-->>Auth: User Record
                        Auth->>bcrypt: Verify Password
                        bcrypt-->>Auth: Password Valid
                        Auth->>JWT: Create Token
                        JWT-->>Auth: JWT Token (7 days)
                        Auth-->>Frontend: {token, user}
                        Frontend->>Frontend: Store Token in LocalStorage
                        
                        Note over Frontend: Subsequent Requests
                        Frontend->>API: Request with Bearer Token
                        API->>JWT: Verify Token
                        JWT-->>API: Payload
                        API->>DB: Get User from Email
                        DB-->>API: User Object
                        API-->>Frontend: Protected Resource
                </div>
            </div>

            <h3>3. Tool Integrity Verification</h3>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Step 1: Hash Calculation</h4>
                    <p><code>hash = SHA256(api_url + api_method + headers + body)</code></p>
                    <p>Calculated when tool is created and stored in database.</p>
                </div>
                <div class="feature-card">
                    <h4>Step 2: Admin Verification</h4>
                    <p>Before approval, admin verifies hash integrity to ensure tool hasn't been tampered with.</p>
                </div>
                <div class="feature-card">
                    <h4>Step 3: Runtime Verification</h4>
                    <p>Every time tool is used, hash is recalculated and compared. Mismatch = blocked execution.</p>
                </div>
                <div class="feature-card">
                    <h4>Step 4: Re-Approval Required</h4>
                    <p>Any modification to tool specs requires admin re-approval to ensure security.</p>
                </div>
            </div>
        </div>

        <!-- Use Cases -->
        <div class="section">
            <h2>Use Cases</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>API Monetization</h4>
                    <p>Developers can monetize their APIs by listing them as tools. Every usage generates MNEE revenue.</p>
                </div>
                <div class="feature-card">
                    <h4>AI Agent Integration</h4>
                    <p>AI systems can discover and use tools automatically, paying for each execution transparently.</p>
                </div>
                <div class="feature-card">
                    <h4>Microservices Marketplace</h4>
                    <p>Create a marketplace of microservices where each service is a pay-per-use tool.</p>
                </div>
                <div class="feature-card">
                    <h4>Data Services</h4>
                    <p>Offer data APIs (weather, stock prices, analytics) with automatic payment collection.</p>
                </div>
                <div class="feature-card">
                    <h4>Computation Services</h4>
                    <p>Provide computation-heavy services (image processing, ML inference) with usage-based pricing.</p>
                </div>
                <div class="feature-card">
                    <h4>Integration Hub</h4>
                    <p>Connect various third-party services through a unified payment and discovery platform.</p>
                </div>
            </div>
        </div>

        <!-- API Endpoints -->
        <div class="section">
            <h2>API Endpoints Overview</h2>
            <div class="diagram-container">
                <div class="mermaid">
                    graph TD
                        API[FastAPI Server]
                        
                        API --> AUTH["/api/auth"]
                        AUTH --> AUTH1["POST /register"]
                        AUTH --> AUTH2["POST /login"]
                        AUTH --> AUTH3["GET /me"]
                        
                        API --> TOOLS["/api/tools"]
                        TOOLS --> T1["POST / - Create Tool"]
                        TOOLS --> T2["GET / - List Tools"]
                        TOOLS --> T3["GET /my-tools"]
                        TOOLS --> T4["GET /:id"]
                        TOOLS --> T5["PATCH /:id"]
                        TOOLS --> T6["DELETE /:id"]
                        
                        API --> PAY["/api/payments"]
                        PAY --> P1["POST /pay/:tool_id"]
                        PAY --> P2["GET /earnings"]
                        PAY --> P3["GET /spending"]
                        PAY --> P4["GET /balance"]
                        PAY --> P5["GET /transactions"]
                        
                        API --> ADMIN["/api/admin"]
                        ADMIN --> A1["GET /pending-tools"]
                        ADMIN --> A2["POST /approve-tool/:id"]
                        ADMIN --> A3["POST /reject-tool/:id"]
                        ADMIN --> A4["GET /users"]
                        ADMIN --> A5["POST /make-admin/:id"]
                        
                        API --> AGENT["/api/agent"]
                        AGENT --> AG1["POST /chat"]
                        
                        API --> MCP["/mcp"]
                        MCP --> M1["GET /tools"]
                        MCP --> M2["POST /execute/:id"]
                        
                        style AUTH fill:#8b5cf6,color:#fff
                        style TOOLS fill:#10b981,color:#fff
                        style PAY fill:#f59e0b,color:#fff
                        style ADMIN fill:#ef4444,color:#fff
                        style AGENT fill:#3b82f6,color:#fff
                        style MCP fill:#8b5cf6,color:#fff
                </div>
            </div>
        </div>

        <!-- Deployment Architecture -->
        <div class="section">
            <h2>Deployment Architecture</h2>
            <div class="diagram-container">
                <div class="mermaid">
                    flowchart TB
                        subgraph "Production Environment"
                            direction TB
                            
                            subgraph "Frontend - Vercel"
                                NEXT[Next.js App]
                                CDN[Vercel CDN]
                                EDGE[Edge Functions]
                            end
                            
                            subgraph "Backend - Render/Railway"
                                FASTAPI[FastAPI Server]
                                WORKERS[Background Workers]
                            end
                            
                            subgraph "Database"
                                PG[(PostgreSQL)]
                            end
                            
                            subgraph "Blockchain"
                                ETH[Ethereum Network]
                                MNEE_C[MNEE Contract]
                            end
                            
                            subgraph "External Services"
                                GEMINI_API[Google Gemini API]
                                GROQ_API[Groq API]
                            end
                        end
                        
                        USER[End Users] --> CDN
                        CDN --> NEXT
                        NEXT --> FASTAPI
                        FASTAPI --> PG
                        FASTAPI --> ETH
                        ETH --> MNEE_C
                        FASTAPI --> GEMINI_API
                        FASTAPI --> GROQ_API
                        
                        style NEXT fill:#8b5cf6,color:#fff
                        style FASTAPI fill:#10b981,color:#fff
                        style PG fill:#3b82f6,color:#fff
                        style ETH fill:#f59e0b,color:#fff
                </div>
            </div>
        </div>

        <!-- Scalability -->
        <div class="section">
            <h2>Scalability & Future Enhancements</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>üöÄ Horizontal Scaling</h4>
                    <p>Stateless API design allows easy horizontal scaling. Add more FastAPI instances behind load balancer.</p>
                </div>
                <div class="feature-card">
                    <h4>üì¶ Caching Layer</h4>
                    <p>Redis caching for tool listings and user sessions to reduce database load.</p>
                </div>
                <div class="feature-card">
                    <h4>üîÑ Queue System</h4>
                    <p>Celery task queue for background jobs like transaction verification and email notifications.</p>
                </div>
                <div class="feature-card">
                    <h4>üåç Multi-Chain Support</h4>
                    <p>Expand beyond Ethereum to support Polygon, BSC, and other EVM-compatible chains.</p>
                </div>
                <div class="feature-card">
                    <h4>ü§ñ Advanced AI</h4>
                    <p>Implement more sophisticated AI models for better tool selection and parameter extraction.</p>
                </div>
                <div class="feature-card">
                    <h4>üìä Analytics Dashboard</h4>
                    <p>Real-time analytics for tool creators to track usage patterns and optimize pricing.</p>
                </div>
                <div class="feature-card">
                    <h4>üîó API Rate Limiting</h4>
                    <p>Implement per-user rate limiting to prevent abuse and ensure fair usage.</p>
                </div>
                <div class="feature-card">
                    <h4>üåê GraphQL API</h4>
                    <p>Add GraphQL endpoint alongside REST for more flexible data querying.</p>
                </div>
            </div>
        </div>

        <!-- Business Model -->
        <div class="section">
            <h2>Business Model</h2>
            <div class="metrics-grid">
                <div class="metric-card">
                    <h3>5%</h3>
                    <p>Platform Fee per Transaction</p>
                </div>
                <div class="metric-card">
                    <h3>95%</h3>
                    <p>Goes to Tool Creator</p>
                </div>
                <div class="metric-card">
                    <h3>$0.01+</h3>
                    <p>Minimum Tool Price</p>
                </div>
                <div class="metric-card">
                    <h3>‚àû</h3>
                    <p>Unlimited Earnings Potential</p>
                </div>
            </div>

            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Revenue Streams</h4>
                    <p>‚Ä¢ Transaction fees (5% of each payment)</p>
                    <p>‚Ä¢ Premium tool listings</p>
                    <p>‚Ä¢ Featured placement in marketplace</p>
                    <p>‚Ä¢ Enterprise API access</p>
                </div>
                <div class="feature-card">
                    <h4>Growth Strategy</h4>
                    <p>‚Ä¢ Developer community building</p>
                    <p>‚Ä¢ AI agent partnerships</p>
                    <p>‚Ä¢ API marketplace expansion</p>
                    <p>‚Ä¢ Cross-chain integration</p>
                </div>
            </div>
        </div>

        <!-- Demo Section -->
        <div class="section">
            <h2>Live Demo & Resources</h2>
            <div style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; padding: 30px; border-radius: 10px; text-align: center;">
                <h3 style="color: white; margin-bottom: 20px;">Experience MiraiPay</h3>
                <p style="margin-bottom: 20px;">Try the live platform and explore the AI-powered tool marketplace</p>
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    <a href="https://miraipay.vercel.app" style="background: white; color: #8b5cf6; padding: 15px 30px; border-radius: 8px; text-decoration: none; font-weight: 600; display: inline-block;">
                        üöÄ View Live Demo
                    </a>
                    <a href="https://github.com/muskiteer/miraipay" style="background: rgba(255,255,255,0.2); color: white; padding: 15px 30px; border-radius: 8px; text-decoration: none; font-weight: 600; display: inline-block;">
                        üìÇ GitHub Repository
                    </a>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <h3>MiraiPay - AI-Powered Tool Marketplace</h3>
            <p>Building the future of API monetization through blockchain and artificial intelligence</p>
            <p style="margin-top: 15px; opacity: 0.8;">¬© 2026 MiraiPay</p>
            <p style="margin-top: 10px; opacity: 0.7;">X402 Protocol | MNEE Stablecoin | Ethereum Blockchain</p>
        </div>
    </div>

    <script>
        // Initialize Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            themeVariables: {
                primaryColor: '#8b5cf6',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#7c3aed',
                lineColor: '#34495e',
                secondaryColor: '#ecf0f1',
                tertiaryColor: '#f8f9fa',
                noteBkgColor: '#fef3c7',
                noteTextColor: '#78350f'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            sequence: {
                diagramMarginX: 50,
                diagramMarginY: 10,
                actorMargin: 50,
                width: 150,
                height: 65,
                boxMargin: 10,
                boxTextMargin: 5,
                noteMargin: 10,
                messageMargin: 35
            }
        });

        // Smooth scrolling for navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Add smooth scroll behavior
            document.documentElement.style.scrollBehavior = 'smooth';

            // Add animation to sections on scroll
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, observerOptions);

            // Observe all sections
            document.querySelectorAll('.section').forEach(section => {
                section.style.opacity = '0';
                section.style.transform = 'translateY(20px)';
                section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
                observer.observe(section);
            });
        });
    </script>
</body>

</html>
